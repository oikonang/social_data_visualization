<!DOCTYPE html>
<meta charset="utf-8">
<style>
    .background {
        fill: none;
        pointer-events: all;
    }
    
    #boroughs {
        fill: #aaa;
    }
    
    #boroughs .active {
        fill: orange;
    }
    
    #borders {
        fill: none;
        stroke: #fff;
        stroke-width: 1.5px;
        stroke-linejoin: round;
        stroke-linecap: round;
        pointer-events: none;
    }
</style>

<body>
    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script>
        var width = 960,
            height = 500,
            centered;

        var projection = d3.geoMercator()
            .center([-73.94, 40.70])
            .scale(50000)
            .translate([(width) / 2, (height) / 2]);

        var path = d3.geoPath()
            .projection(projection);

        var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

        svg.append("rect")
            .attr("class", "background")
            .attr("width", width)
            .attr("height", height)
            .on("click", clicked);

        var g = svg.append("g");

        d3.json("nyc-districts.json", function(error, nyb) {
            if (error) throw error;

            console.log(nyb);

            g.append("g")
                .attr("id", "boroughs")
                .selectAll(".state")
                .data(nyb.features)
                .enter().append("path")
                .attr("class", function(d) {
                    return d.properties.name;
                })
                .attr("d", path)
                .on("click", clicked);

        });

        function clicked(d) {
            var x, y, k;

            if (d && centered !== d) {
                var centroid = path.centroid(d);
                x = centroid[0];
                y = centroid[1];
                k = 4;
                centered = d;
            } else {
                x = width / 2;
                y = height / 2;
                k = 1;
                centered = null;
            }

            g.selectAll("path")
                .classed("active", centered && function(d) {
                    return d === centered;
                });

            g.transition()
                .duration(750)
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
                .style("stroke-width", 1.5 / k + "px");
        }
    </script>